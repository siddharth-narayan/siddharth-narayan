name: Update README cards

on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      ## LLM-generated
      - name: Generate stats card (dark)
        uses: readme-tools/github-readme-stats-action@v1
        with:
          card: stats
          options: username=siddharth-narayan&show_icons=true&theme=dark&hide_rank=true
          path: cards/stats-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Generate stats card (light)
        uses: readme-tools/github-readme-stats-action@v1
        with:
          card: stats
          options: username=siddharth-narayan&show_icons=true&hide_rank=true
          path: cards/stats-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Generate top languages card (dark)
        uses: readme-tools/github-readme-stats-action@v1
        with:
          card: top-langs
          options: username=siddharth-narayan&layout=compact&size_weight=0.5&count_weight=0.5&theme=dark
          path: cards/top-langs-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Generate top languages card (light)
        uses: readme-tools/github-readme-stats-action@v1
        with:
          card: top-langs
          options: username=siddharth-narayan&layout=compact&size_weight=0.5&count_weight=0.5
          path: cards/top-langs-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      # =====================
      # Repo pin cards
      # =====================

      - name: Generate pin cards (dark)
        uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=personal-site&theme=dark
          path: cards/pin-personal-site-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Generate pin cards (light)
        uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=personal-site
          path: cards/pin-personal-site-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=Spotlight&theme=dark
          path: cards/pin-spotlight-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=Spotlight
          path: cards/pin-spotlight-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=AiFlow&theme=dark
          path: cards/pin-aiflow-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=AiFlow
          path: cards/pin-aiflow-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=zxform&theme=dark
          path: cards/pin-zxform-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=zxform
          path: cards/pin-zxform-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=softether-cli&theme=dark
          path: cards/pin-softether-cli-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=softether-cli
          path: cards/pin-softether-cli-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=test-vpn-rust&theme=dark
          path: cards/pin-test-vpn-rust-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=test-vpn-rust
          path: cards/pin-test-vpn-rust-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=openssl-quantum&theme=dark
          path: cards/pin-openssl-quantum-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=openssl-quantum
          path: cards/pin-openssl-quantum-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=test-vpn&theme=dark
          path: cards/pin-test-vpn-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=test-vpn
          path: cards/pin-test-vpn-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=ai-translation-extension&theme=dark
          path: cards/pin-ai-translation-extension-dark.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - uses: readme-tools/github-readme-stats-action@v1
        with:
          card: pin
          options: username=siddharth-narayan&repo=ai-translation-extension
          path: cards/pin-ai-translation-extension-light.svg
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Commit cards
        run: |
          git config user.name "github-actions"
          git config user.email "github-actions@users.noreply.github.com"
          git add cards/*.svg
          git commit -m "Update README cards" || exit 0
          git push
